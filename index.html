<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="manifest" href="manifest.json">
    <link rel="stylesheet" href="styles.css">
    <link rel="icon" href="jcni.jpg">
    <title>Jay County News & Information</title>
    
    <!-- Firebase App (the core Firebase SDK) -->
    <script src="https://www.gstatic.com/firebasejs/10.14.1/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.14.1/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.14.1/firebase-messaging.js"></script>
    
    <script>
      // Initialize Firebase
      const firebaseConfig = {
        apiKey: "AIzaSyAgrJX3NKXt_jJ3iVmYCuNze3HievOnrqQ",
        authDomain: "jcni-webpage.firebaseapp.com",
        projectId: "jcni-webpage",
        storageBucket: "jcni-webpage.appspot.com",
        messagingSenderId: "62856501328",
        appId: "1:62856501328:web:86df1e0a0477671e501955",
        measurementId: "G-PSP0FWZQZL"
      };
      firebase.initializeApp(firebaseConfig);
      const auth = firebase.auth();
      const messaging = firebase.messaging();
  
      // Firebase Authentication Functions
      function signUp(email, password) {
        auth.createUserWithEmailAndPassword(email, password)
          .then((userCredential) => {
            console.log("Sign Up Successful", userCredential.user);
            alert("Sign Up Successful!");
          })
          .catch((error) => {
            console.error("Sign Up Error", error);
            alert("Sign Up Error: " + error.message);
          });
      }
  
      function signIn(email, password) {
        auth.signInWithEmailAndPassword(email, password)
          .then((userCredential) => {
            console.log("Sign In Successful", userCredential.user);
            alert("Sign In Successful!");
          })
          .catch((error) => {
            console.error("Sign In Error", error);
            alert("Sign In Error: " + error.message);
          });
      }
  
      function logOut() {
        auth.signOut()
          .then(() => {
            console.log("User logged out");
            alert("User logged out");
          })
          .catch((error) => {
            console.error("Sign Out Error", error);
            alert("Sign Out Error: " + error.message);
          });
      }
  
      // Firebase Cloud Messaging for Notifications
      Notification.requestPermission().then((permission) => {
        if (permission === 'granted') {
          messaging.getToken({ vapidKey: 'BKrKw--JiJbB8S5DTKTUaTM71h8C4CGOMfCQ92n_kFRK5-XJuvDo7BOqF5oov_eIOUR9Rc3-azq8dxGvothIjwk' })
            .then((currentToken) => {
              if (currentToken) {
                console.log('Token received:', currentToken);
              } else {
                console.warn('No registration token available.');
              }
            })
            .catch((err) => {
              console.error('Error retrieving token:', err);
            });
        } else {
          console.warn('Notification permission denied');
        }
      });
  
      messaging.onMessage((payload) => {
        console.log('Message received:', payload);
        // Custom logic to handle the received message
      });
  
      // Registering the Service Worker
      if ('serviceWorker' in navigator) {
        navigator.serviceWorker.register('/firebase-messaging-sw.js')
          .then((registration) => {
            console.log('Service Worker registered with scope:', registration.scope);
            messaging.useServiceWorker(registration);
          })
          .catch((error) => {
            console.error('Service Worker registration failed:', error);
          });
      }
    </script>
    <script defer src="script.js"></script>
  </head>
  